**Shortest Path Bridging Part 1 - Wait, what? Why?**

Well, that IS the question isn't it? SPB connoisseurs might oppose - They would argue that the real question here is why you haven't seen nor heard about it being used ANYWHERE by ANYONE in your whole professional career (unless you are one of the incredibly few that actually have).
This gem of a technique became something of the "Betamax of networking" - It is great, and it works just fine, but it isn't really supported by anyone. The last bit is something of a stretch - It is present in the linux kernel, it is supported in OpenVswitch. But on the hardware side - Only Extreme (via the bits bought out from Avaya) and Alcatel-Lucent Enterprise have working SPBm (m for mac, more about that later) implementations as of 2023. Maybe Huawei too. Not counting them. But anyway - SPB isn't really supported by any of the big vendors in the business. EVPN/VXLAN won the race by a thousand to one (if you count the number of deployments of the techniques, respectively). To say that Shortest Path Bridging is anything but a very niche technique would be a lie. But it's out there. It isn't going away anytime soon. There are reasons for it. 

So what is SPB exactly? In its most basic form, it is a safe way to stretch L2 over ... Something. We'll get back to that. You could also argue that SPB is some sort of tunneling technique more then just L2 stretched over... Whatever it was again. It depends on your views on that topic really. I'm not going to make a case for either view, I use both. 

I have tried to boil everything down to one sentence. The ONE sentence to explain it all: 

>> __Shortest Path Bridging is a link-layer underlay/overlay transport technique based on IS-IS TLV extensions that can scale up to thousands of nodes, and that gives you the opportunity to create L2VPNs, pseudo-wires, L3VPNs, and to handle inline routing and the propagation of routes within your routing domains over a redundant and meshed backbone network where all links are active.__ <<

If you read that out, now is the time to stop and breathe for a few seconds. No fainting is allowed. That IS a mouthful. But it does sound an awful lot like MPLS/VPLS, doesn't it? That is because Shortest Path Bridging solves many (not all though) of the same problems MPLS does, just in another way. It also overlap the functions EVPN/VXLAN offers. And that is because SPB really is the other branch of the EVPN tree - It offers more or less the same functionality, but with maybe 5% of the configuration EVPN/VXLAN needs. SPB is very very simple at its core - It doesn't need a stack of collaborating protocols like MPLS and EVPN/VXLAN does in order to work. It only need one: IS-IS. This is what SPB relies on for both its underlay and overlay: It is used for building the loop-free multipaths in the underlay, for source-learning, and for carrying VPN-routes across the backbone. All done with a few clever extensions added to the IS-IS TLVs: RFC6329 - IS-IS Extensions Supporting IEEE 802.1aq Shortest Path Bridging (D. Fedyk et al).

The RFC describes two operational versions of SPB - SPBv (v for vlans) and SPBm (m for mac-address). SPBm won - All working implementations as of 2023 are SPBm, wich uses PBB (Provider Backbone Bridging, 802.1ah). PBB is a mac-in-mac encapsulation technique, wich in SPBm acts as the service delivery - The overlay where you define your services. A frame within the SPB environment will be forwarded to its destination based on the information in the outer PBB mac-header, via the SPF tree topology created by IS-IS. When it arrives at the destination SPB edge node (BEB - Backbone Edge Bridge), the outer header is stripped off, and the inner header IS-IS service-id is mapped to a corresponding SAP (Service access port). Inner PBB header is stripped off, and the service payload is delivered to the SAP port. An SPB node not terminating a SPB service is called a BCB (Backbone Core Bridge), and only switches frames based on the destination mac in the outer PBB mac-header. So, a BCB is totally ignorant of what it actually switches - There is no need for it to learn any mac-addresses deeper within a service if it doesn't terminate that service.  No lookups, no source-learning. Just switching. It is pretty close to how label switching works, to some extent. This design works the same way - You can forward traffic in a simpler, and more resourceful way, at scale.

Shortest Path Bridging was created with co-existance with the legacy network environment in mind. You can deploy SPB in any existing switched environment, alongside of legacy VLANs, providing a totally separated network within SPB. The following pre-requisites have to be in in place:

* NOT SO JUMBO FRAMES. 1524 is what is needed due to the mac-in-mac PBB encapsulation. Might be a PITA to enable in some environments. Not in ALE (Alcatel-Lucent Enterprise), since everything is 9216 default.
* In addition - Switches must be able to switch the mac-in-mac frames transparantly. All major vendor's switches after 2010 can do that.
* It is best practice to disable STP on the BVLANS (Backbone VLANS) that pass through the legacy environment switches. The BVLANs in the SPB switches will drop all BPDUs anyway, and STP is default disabled on all BVLANs in SPB-enabled switches. The SPB control plance has to be in control of all paths included in the setup.
* When adding a path for SPB through a legacy environment, think of it as adding another point-to-point link. The legacy environment switches will be invisible to the SPB control plane - It is just a path included in the SPF algorithm math.

IS-IS doesn't ride on top of IP like OSPF or BGP by the way. It has its own IP protocol: 124. So SPB is using the IS-IS control plane messaging, very much like how MP-BGP extensions is handling EVPN within the BGP protocol. 
__In practice, an SPB node doesn't need any IP set for SPB to work.__ (Although some losers like mgmt interfaces).

In part 2, we will set up the BVLANS, enable the SPB service, and add links, effectively creating the SPB backbone/underlay.